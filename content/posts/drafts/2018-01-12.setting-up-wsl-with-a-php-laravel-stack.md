---
title: Setting Up WSL with a PHP/Laravel Stack
---



- install WSL (ubuntu for this purpose) on w10 creators update.
- login create a user and pass.
- add libraries for php71 `sudo add-apt-repository ppa:ondrej/php`
- update / upgrade the ubuntu (this adds the libraries) `sudo apt-get update && sudo apt-get upgrade`
- Install some prerequired packages

```bash
sudo apt-get install php-fpm php-mysql php7.1-cli php7.1-curl php7.1-mbstring php7.1-mcrypt php7.1-xml php7.1-zip php7.1-intl curl git unzip php-cli
```

- download composer, `cd ~` and `curl -sS https://getcomposer.org/installer -o composer-setup.php` 
- install composer `sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer`
- You may encounter a permissions error, if so run `sudo chown -R $USER .composer/` which will give permissions to write where needed.
- modify global composer file `~/.composer/composer.json` with the following to include valet (linux)

```json
{
    "require": {
        "valeryan/valet-wsl": "dev-master"
    },
    "repositories": [
        {
            "type": "vcs",
            "url":  "git@github.com:valeryan/valet-wsl.git"
        }
    ]
}
```

- run `composer global update` to download valet into wsl.
- install valet with `valet install` (may need to configure nginx still?)
- To get windows to recognised wild card domains is a nogo, to do this we can use something called acrylic (downloadable, open source package) which allows us to use a custom host file and set it up
- modify hosts of acylic with `127.0.0.1 *.test`
- You may not get the hosts to recognise your url, if you don't change your adapter settings to read ipv4 dns of `127.0.0.1` (acylic) and ipv6 to `::1`
- WSL mounts your window drives automatically, and they are available at `/mnt/`. I created an alias to `/mnt/u/sites` in my home folder on ubuntu for easy access
- cd into your directory you wish valet to run from and run `valet park`
- Try the site in your windows browser.

---

Visual Code tweaks:

- running VS code under windows, I had to configure it to read the proper php/terminal executable so that things would stop going haywire, in your settings add the following two lines

```json
"terminal.integrated.shell.windows": "C:\\WINDOWS\\system32\\bash.exe",
"php.validate.executablePath": "C:\\WINDOWS\\system32\\bash.exe"
```

- I also recommend Dayl Reese themes.